<!DOCTYPE html>
<html>
<head>

    <title>Advanced Javascript Assignment</title>
    <style>
        #rightSide{
            position: absolute;
            width: 400px;
            height: 400px;
            left: 500px;
            border-left: 1px solid black;
        }

        #leftSide{
            position: absolute;
            width: 400px;
            height: 400px;
        }
        
    </style>

    <script type="text/javascript">
        var number_of_faces = 5;

        function generate_face(){
            var left_side = document.getElementById("leftSide");
            var right_side = document.getElementById("rightSide");
            var body = document.getElementsByTagName("body")[0];

            while (number_of_faces > 0){

                var img = document.createElement("img");
                var top = Math.floor(Math.random()*400);
                var left = Math.floor(Math.random()*400);
                console.log("top: " + top + "left: " + left + "\n");

                img.style.position = "absolute";
                img.style.top = top + "px";
                img.style.left = left + "px";
                img.src = "http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png";
                left_side.appendChild(img);

                number_of_faces --;
            }

            var left_side_images = left_side.cloneNode(true);
            left_side_images.removeChild(left_side_images.lastChild);
            right_side.appendChild(left_side_images);

            left_side.lastChild.onclick = function next_level(event){
                event.stopPropagation();
                left_side.lastChild.onclick = null;
                number_of_faces += 5;
                generate_face();
            };

            body.onclick = function game_over(){
                alert("Game Over!!!");
                body.onclick = null;
                left_side.lastChild.onclick = null;
            };
        }
    </script>
</head>
<body onload="generate_face()">

    <h1>Matching Game</h1>
    <p>Click on extra smiling face on the left.</p>

    <div id="leftSide"></div>
    <div id="rightSide"></div>

</body>
</html>